<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>HLG-MOS Open-Source Software Charter - UNECE HLG-MOS Open-Source Software Charter for Official Statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href=".//assets/img/oss_charter_logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="./assets/styling/styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./assets/img/oss_charter_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">HLG-MOS Open-Source Software Charter</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./charter.html" rel="" target="" aria-current="page">
 <span class="menu-text">The Principles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./case_studies.html" rel="" target="">
 <span class="menu-text">Case Studies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./major_topics.html" rel="" target="">
 <span class="menu-text">Major Topics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./background.html" rel="" target="">
 <span class="menu-text">Background</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resources.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://www.linkedin.com/showcase/unece-modernisation-of-official-statistics/" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/UNECE/OSS" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#opening-statement" id="toc-opening-statement" class="nav-link active" data-scroll-target="#opening-statement">Opening Statement</a></li>
  <li><a href="#principles-under-process-of-ces-endorsement" id="toc-principles-under-process-of-ces-endorsement" class="nav-link" data-scroll-target="#principles-under-process-of-ces-endorsement">Principles (under process of CES endorsement)</a>
  <ul class="collapse">
  <li><a href="#oss-by-default" id="toc-oss-by-default" class="nav-link" data-scroll-target="#oss-by-default">1. OSS by default</a></li>
  <li><a href="#work-in-the-open" id="toc-work-in-the-open" class="nav-link" data-scroll-target="#work-in-the-open">2. Work in the open</a></li>
  <li><a href="#improve-and-give-back" id="toc-improve-and-give-back" class="nav-link" data-scroll-target="#improve-and-give-back">3. Improve and give back</a></li>
  <li><a href="#think-generic-statistical-building-blocks" id="toc-think-generic-statistical-building-blocks" class="nav-link" data-scroll-target="#think-generic-statistical-building-blocks">4. Think generic statistical building blocks</a></li>
  <li><a href="#test-package-and-document" id="toc-test-package-and-document" class="nav-link" data-scroll-target="#test-package-and-document">5. Test, package and document</a></li>
  <li><a href="#choose-permissive" id="toc-choose-permissive" class="nav-link" data-scroll-target="#choose-permissive">6. Choose permissive</a></li>
  <li><a href="#promote" id="toc-promote" class="nav-link" data-scroll-target="#promote">7. Promote</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="UNECE HLG-MOS OSS Charter.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">UNECE HLG-MOS Open-Source Software Charter for Official Statistics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The text herein is currently under draft and should by no means be considered finalised.</p>
<p>Any references to endorsement by the UNECE HLG-MOS or any other body are proposed and not valid as of the time of writing.</p>
</div>
</div>
<section id="opening-statement" class="level2">
<h2 class="anchored" data-anchor-id="opening-statement">Opening Statement</h2>
<p>UNECE HLG-MOS recognizes open source software as essential for modern statistical production, fostering transparency in methodology and promoting international collaboration in developing and supporting the production of official statistics. Open source solutions enable NSOs to develop, validate, and share statistical methods while ensuring reproducibility of official statistics. By adopting and developing open source tools, NSOs can establish flexible, cost-effective statistical infrastructures that adapt to emerging data sources and methodological innovations. The transparent nature of open source software allows for peer review of statistical procedures, strengthening the credibility of official statistics and facilitating methodological harmonisation across countries. NSOs shall prioritise open source solutions for statistical processing, particularly for data collection, analysis, and dissemination tools, ensuring long-term sustainability and knowledge retention within statistical systems. Through open source adoption and development, NSOs can build robust statistical capabilities while promoting international statistical standards and best practices. Sharing statistical code and tools between NSOs creates a collaborative ecosystem that accelerates innovation in official statistics while reducing duplicate development efforts. This approach ensures efficient use of public resources while maintaining the independence and scientific integrity of national statistical systems. Open source statistical software enables NSOs to respond rapidly to emerging data needs while building trust through transparency in statistical production.</p>
<p>The UNECE HLG-MOS therefore endorses using the following Principles on Open Source Software in official statistics, both the production of software, and the adoption of software for statistical production.</p>
</section>
<section id="principles-under-process-of-ces-endorsement" class="level2">
<h2 class="anchored" data-anchor-id="principles-under-process-of-ces-endorsement">Principles (under process of CES endorsement)</h2>
<section id="oss-by-default" class="level3">
<h3 class="anchored" data-anchor-id="oss-by-default">1. OSS by default</h3>
<section id="statement" class="level4">
<h4 class="anchored" data-anchor-id="statement">Statement</h4>
<p>In the production of official statistics we prefer the use of open source software solutions over closed software solutions. Moreover we share our software solutions as open source.</p>
</section>
<section id="rationale" class="level4">
<h4 class="anchored" data-anchor-id="rationale">Rationale</h4>
<p>This principle adds to core values in official statistics such as being transparent and independent in how we make statistics and striving for high quality and reproducibility. Using and sharing open source software increases the transparency on how we work, it avoids black boxes in the implementation of official statistics.</p>
</section>
<section id="implications" class="level4">
<h4 class="anchored" data-anchor-id="implications">Implications</h4>
<p>This means that when implementing, redesigning or creating new processes, open source software solutions have preference. Only when no viable open source solutions exist it is possible to derogate from the default OSS option. The same holds sharing: sharing as open source is the default, but it is possible to derogate from this in justified cases. For NSIs this means that the methods used in the production of official statistics are not just described, the code used to actually apply the method is shared as OSS. For International Organisations this means openness on how international aggregates are computed via OSS solutions.</p>
</section>
</section>
<section id="work-in-the-open" class="level3">
<h3 class="anchored" data-anchor-id="work-in-the-open">2. Work in the open</h3>
<section id="statement-1" class="level4">
<h4 class="anchored" data-anchor-id="statement-1">Statement</h4>
<p>We start our projects in the open from the beginning and clearly mark maturity status.</p>
</section>
<section id="rationale-1" class="level4">
<h4 class="anchored" data-anchor-id="rationale-1">Rationale</h4>
<p>Many projects have the intention to publish results as open source but have difficulties deciding on the best moment to do this. It might feel uncomfortable to put early ideas and rough implementation sketches on-line, but on the other hand sharing it too late prevents others from providing valuable comments and ideas or volunteering to work together on the project. To circumvent this dilemma we start working in the open right from the beginning wherever possible and clearly mark and update our projects development phase over time.</p>
</section>
<section id="implications-1" class="level4">
<h4 class="anchored" data-anchor-id="implications-1">Implications</h4>
<p>This means that it is recommended and accepted to start development projects in the public domain. We clearly show development status, which may vary from pre-alpha to stable and proven by showing a public roadmap, public source code repository, a public backlog of features, issues, bugs etc.</p>
</section>
</section>
<section id="improve-and-give-back" class="level3">
<h3 class="anchored" data-anchor-id="improve-and-give-back">3. Improve and give back</h3>
<section id="statement-2" class="level4">
<h4 class="anchored" data-anchor-id="statement-2">Statement</h4>
<p>We rather improve existing open source solutions than decide to create new solutions and we give our improvements back to the respective open source community.</p>
</section>
<section id="rationale-2" class="level4">
<h4 class="anchored" data-anchor-id="rationale-2">Rationale</h4>
<p>There are cases where existing open source solutions do not exactly cover the functionality needed in official statistics. The quickest way to cope with this is to copy a solution, adapt it and use it. However improvements implemented in the original solution will not be merged into the copy and our improvements made to the copy will not be visible in a wider context. Therefore we strive to give back our improvements to the open source community as change requests or suggestions even if it takes additional resources to do that. In the end this is an investment in the effectiveness and efficiency of the official statistics community as a whole.</p>
</section>
<section id="implications-2" class="level4">
<h4 class="anchored" data-anchor-id="implications-2">Implications</h4>
<p>This means that statistical organisations actively search for solutions that can be re-used instead of creating new solutions. Even if a solution does not exactly fit the needed functionality, it is examined how it could be improved, keeping the intended functionality in mind or even widening it. This also holds for partial solutions such as code snippets and (machine learning) models that could be valuable for others. The changes or extensions are tested, documented, and given back to the respective community to decide on possible integration into their solution.</p>
</section>
</section>
<section id="think-generic-statistical-building-blocks" class="level3">
<h3 class="anchored" data-anchor-id="think-generic-statistical-building-blocks">4. Think generic statistical building blocks</h3>
<section id="statement-3" class="level4">
<h4 class="anchored" data-anchor-id="statement-3">Statement</h4>
<p>In our open source work we strive for re-usable generic functional building blocks that support well-defined methodology in statistical processes.</p>
</section>
<section id="rationale-3" class="level4">
<h4 class="anchored" data-anchor-id="rationale-3">Rationale</h4>
<p>Publishing source code as open source is not enough for effective re-use in the global official statistics community. It is necessary to think about the design of what is to be shared and identify generic statistical building blocks that can be used in different contexts. Therefore we design the software from the intended user point of view and in a way that it can be re-used in multiple statistical domains or organisations as possible. This helps maintain complex statistical processes and high-quality official statistics.</p>
</section>
<section id="implications-3" class="level4">
<h4 class="anchored" data-anchor-id="implications-3">Implications</h4>
<p>This means that monolithic applications are componentised as much as possible in generic configurable statistical building blocks. We put statistical functionality in code and make statistical expert knowledge configurable. We make these components as much as possible generic in time, across statistical domains and across statistical organisations. For individual NSIs this means that not just “its” statistical production process should be kept in mind when developing tools but also the possible wider applicability. International Organisations should actively encourage the development and sharing of generic OSS solutions within their domain of expertise.</p>
</section>
</section>
<section id="test-package-and-document" class="level3">
<h3 class="anchored" data-anchor-id="test-package-and-document">5. Test, package and document</h3>
<section id="statement-4" class="level4">
<h4 class="anchored" data-anchor-id="statement-4">Statement</h4>
<p>We test, package and document our open source software for easy re-use.</p>
</section>
<section id="rationale-4" class="level4">
<h4 class="anchored" data-anchor-id="rationale-4">Rationale</h4>
<p>Re-using generic statistical software in the official statistics community is not always easy due to differences in statistical processes, technological environments, and way of working. Testing our software on functionality and security and packaging our software with good documentation is of utter importance as it improves the chances of re-use. General purpose package management systems offer versioning and documentation facilities to exchange generic statistical software. The use of such packaging systems helps maintain complex statistical processes and guarantee high-quality official statistics.</p>
</section>
<section id="implications-4" class="level4">
<h4 class="anchored" data-anchor-id="implications-4">Implications</h4>
<p>This means that we invest in testing, security scans, packaging and documentation to enable re-use. Security patches are applied as soon as possible. Documentation is designed from the viewpoint of a statistical user, keeping it concise, understandable but also complete and covering at least the basic functionality and a complete API reference. Packaging is a key success criterion for open source projects. Larger projects should adopt modern approaches such as containerisation, automate as much as possible, and smaller projects can follow these practices. Every package is downloadable without registration, is installable with minimal efforts and has a minimal viable example that can be executed. Dependencies are managed and minimised as much as possible . Versioning is implemented according to the principles of the respective package exchange platform with a preference for semantic versioning. Security patches are implemented with priority. For individual NSI this means that published OSS software is maintained and updated according to the policies of the relevant platforms, e.g.&nbsp;CRAN. International Organisations should play an active role in knowledge exchange on test, package and documentation policies in their domain of expertise.</p>
</section>
</section>
<section id="choose-permissive" class="level3">
<h3 class="anchored" data-anchor-id="choose-permissive">6. Choose permissive</h3>
<section id="statement-5" class="level4">
<h4 class="anchored" data-anchor-id="statement-5">Statement</h4>
<p>We choose the most permissive OS licence possible for sharing our software.</p>
</section>
<section id="rationale-5" class="level4">
<h4 class="anchored" data-anchor-id="rationale-5">Rationale</h4>
<p>Re-using software is in the common interest of the official statistics community. Re-use of our software not only enhances efficiency but also improves the quality of the software since the larger user community can contribute to development and maintenance. To maximise re-use by others it is necessary to choose an OS licence that maximally allows re-use, and minimises conflicts with other licences. This is known as “permissive” (see for example here). When choosing the appropriate OS licence we strive for maximum re-use.</p>
</section>
<section id="implications-5" class="level4">
<h4 class="anchored" data-anchor-id="implications-5">Implications</h4>
<p>This means that when sharing software we opt for a permissive licence (e.g.&nbsp;Apache 2.0/MIT) over a “Copyleft” licence, taking into legal, organisational and societal considerations. Mandatory acknowledgement / attribution of sources and authors is a viable additional option.</p>
</section>
</section>
<section id="promote" class="level3">
<h3 class="anchored" data-anchor-id="promote">7. Promote</h3>
<section id="statement-6" class="level4">
<h4 class="anchored" data-anchor-id="statement-6">Statement</h4>
<p>We invest in promoting new developments or improvements on our open source software within the official statistics community and where applicable in a wider context.</p>
</section>
<section id="rationale-6" class="level4">
<h4 class="anchored" data-anchor-id="rationale-6">Rationale</h4>
<p>Re-use of generic software is not going to happen if no one knows what can be re-used. On the other hand it is difficult to know beforehand what the value of our software is for others. The only way out is to communicate, even if we have no clue if it is usable in a wider context. We advertise our software in an honest, brief way, mentioning its core functionality. Let the public know our plans for new developments and improvements and be open for suggestions for improvements.</p>
</section>
<section id="implications-6" class="level4">
<h4 class="anchored" data-anchor-id="implications-6">Implications</h4>
<p>This means working together on communication facilities targeted at the open source community. A community-driven approach of sharing knowledge, possible OS building blocks and its application in the statistical production should be the preference instead of centrally maintained repositories. A centrally maintained repository of software tools can become outdated soon and collecting information from the community could be a big effort. Therefore, such a repository should be maintained by the whole community. For individual NSIs this means that they are active participants in the OSS community by participating in events, joining relevant only forums, etc. International Organisations should play an active role in the organisation of the statistical OSS community in their domain of expertise.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div>   
    <div class="nav-footer-center"><a href="https://unece.org/statistics/modernstats"><img src=".\assets/img/modernstats_footer.png" class="img-fluid" alt="ModernStats" width="110"></a></div>
    <div class="nav-footer-right">Built with <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>